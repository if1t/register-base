<sproc-sliding-panel [isOpen]="isOpen$ | async" [subOffsetHeight]="subOffsetHeight">
  <sproc-filter-list-header
    header
    [showTotal]="showTotal"
    [showPin]="showPin"
    [showCloseButton]="showCloseButton"
    [total]="total$ | async"
    [acceptButtonDisabled]="acceptButtonDisabled"
    [applyButtonDisabled]="applyButtonDisabled"
    [filterListHeaderTitle]="filterListHeaderTitle"
    (pinnedChange)="closeMenu($event)"
    (applyFilter)="onApplyFilter($event)"
  ></sproc-filter-list-header>

  <ng-container [ngSwitch]="filterState$ | async">
    <ng-container *ngSwitchCase="FilterState.FILTER_LIST" [ngTemplateOutlet]="filtersTemplate">
    </ng-container>

    <div *ngSwitchCase="FilterState.SAVED_LIST">
      <sproc-filter-list-saved></sproc-filter-list-saved>
    </div>

    <div *ngSwitchCase="FilterState.ON_EDIT_FILTER">
      <sproc-filter-edit></sproc-filter-edit>

      <sproc-divider></sproc-divider>

      <ng-container [ngTemplateOutlet]="filtersTemplate"></ng-container>
    </div>

    <div *ngSwitchCase="FilterState.ON_SAVE_FILTER">
      <sproc-filter-edit></sproc-filter-edit>
    </div>

    <ng-template #filtersTemplate>
      @defer (on viewport) {
        <ng-content />
      } @loading (minimum 1s) {
        <tui-loader size="m" class="loader"></tui-loader>
      } @placeholder {
        <span>...</span>
      }
    </ng-template>
  </ng-container>

  <sproc-filter-list-footer
    footer
    [acceptButtonDisabled]="acceptButtonDisabled"
    [applyButtonDisabled]="applyButtonDisabled"
    (apply)="onApplyFilter($event)"
    [footerApplyButtonLabel]="footerApplyButtonLabel"
  ></sproc-filter-list-footer>
</sproc-sliding-panel>
